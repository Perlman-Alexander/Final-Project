<!doctype html>
<html>
<head>
	<title>Perlman-Alexander</title>
	<style>
	body, html
	{
		overflow-x: hidden;
		overflow-y: hidden;
	}
	</style>
</head>
<body>
	<div id="container"></div>
</body>
<script id="vertexShader" type="x-shader/x-vertex">
	uniform float time;
	uniform float waveHeights[400];
	uniform float waveLength;
	varying float vAlpha;
	varying vec3 color;
	varying vec4 mvPosition;

	void main() 
	{
		gl_PointSize = 2.0;
		float yval = position.y + 90.;
		float ratio = yval / 180.;
		float newypos = position.y;
		float sineMagnitude = 9.0;
		float zImpactDivider = 4.0;
		float x = ((time+position.x+(position.z/zImpactDivider))/waveLength);
		float sineWave = ratio*(sin(x)*sineMagnitude);
		float noiseScale = 50.0;
		float sineWaveScale = 10.0;
		float waveHeightLength = 400.0;
		newypos = position.y + noiseScale*waveHeights[int(mod((time+position.x+position.z), waveHeightLength))] + sineWaveScale*sineWave;
		vec3 white = vec3(1., 1., 1.);
		vec3 blue = vec3(0.8, 0.4, 0.);
		color = mix(blue, white, 0.5*(newypos/300.0));
		vec3 newposition = vec3(position.x, newypos, position.z);
		mvPosition = modelViewMatrix * vec4( newposition, 1.0 );
		gl_Position = projectionMatrix * mvPosition;
	}
</script>
<script id="fragmentShader" type="x-shader/x-vertex">
	varying vec3 color;
	void main()
	{
		gl_FragColor = vec4( color, 1.0 );
	}
</script>
<script src="js/three.min.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/main.js"></script>
</html>