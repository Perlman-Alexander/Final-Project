<!doctype html>
<html>
<head>
	<title>Perlman-Alexander</title>
	<link rel="stylesheet" type="text/css" href="rangeslider.css">
	<style>
	body, html
	{
		overflow-x: hidden;
		overflow-y: hidden;
	}
	</style>
</head>
<body>
	<div style="position: absolute; color: white; bottom: 50px; left: 50px; font-size: 30px;"><span style="font-size: 90px; margin-right: 30px;">Wave Simulator</span> by Maxwell Perlman and Stefan Alexander</div>
	<div style="left: 50px; top: 50px; position: absolute; background-color: rgba(255, 255, 255, 0.9); padding: 10px 30px 30px 30px; border-radius: 10px;">
		<h2>Particle Number</h2>
		<input id="particles" type="range" min="10000" max="500000" step="1000" value="50000">
		<h2>Wavelength</h2>
		<input id="wavelength" type="range" min="30" max="700" step="10" value="80">
		<h2>Wave Amplitude</h2>
		<input id="waveamplitude" type="range" min="30" max="150" step="5" value="90">
		<h2>Noise Scale</h2>
		<input id="noisescale" type="range" min="0" max="750" step="5" value="290">
		<h2>Wave Speed</h2>
		<input id="wavespeed" type="range" min="1" max="100" step="5" value="21">
	</div>
	<div style="right: 50px; top: 50px; position: absolute; background-color:  rgba(255, 255, 255, 0.9); padding: 10px 30px 30px 30px;  border-radius: 10px">
		<h2>Color 1 - R</h2>
		<input id="c1r" type="range" min="0" max="255" step="1" value="0">
		<h2>Color 1 - G</h2>
		<input id="c1g" type="range" min="0" max="255" step="5" value="0">
		<h2>Color 1 - B</h2>
		<input id="c1b" type="range" min="0" max="255" step="5" value="255">
		<h2>Color 2 - R</h2>
		<input id="c2r" type="range" min="0" max="255" step="1" value="255">
		<h2>Color 2 - G</h2>
		<input id="c2g" type="range" min="0" max="255" step="5" value="255">
		<h2>Color 2 - B</h2>
		<input id="c2b" type="range" min="0" max="255" step="5" value="255">
	</div>
	<div id="container"></div>
</body>
<script id="vertexShader" type="x-shader/x-vertex">
	uniform float time;
	uniform float waveHeights[400];
	uniform float waveHeightLength;
	uniform float waveLength;
	uniform float waveAmplitude;
	uniform float zRotation;
	uniform float noiseScale;
	uniform float wavespeed;
	uniform vec3 maincolor;
	uniform vec3 subcolor;
	varying float vAlpha;
	varying vec3 color;
	varying vec4 mvPosition;

	void main() 
	{
		gl_PointSize = 2.0;
		float yval = position.y + 100.;
		float ratio = yval / 200.;
		float newypos = position.y;
		float x = ((wavespeed*time+position.x+(position.z/zRotation))/waveLength);
		float sineWave = ratio*(sin(x)*waveAmplitude);
		newypos = position.y + noiseScale*waveHeights[int(mod((time+position.x+position.z), waveHeightLength))] + sineWave;
		color = mix(maincolor, subcolor, 0.5*(newypos/300.0));
		vec3 newposition = vec3(position.x, newypos, position.z);
		mvPosition = modelViewMatrix * vec4( newposition, 1.0 );
		gl_Position = projectionMatrix * mvPosition;
	}
</script>
<script id="fragmentShader" type="x-shader/x-vertex">
	varying vec3 color;
	void main()
	{
		gl_FragColor = vec4( color, 1.0 );
	}
</script>
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/rangeslider.min.js"></script>
<script>
	$('input[type="range"]').rangeslider({
		polyfill: false
	});
</script>
<script src="js/three.min.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/main.js"></script>
</html>