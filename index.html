<!doctype html>
<html>
<head>
	<title>Perlman-Alexander</title>
	<style>
	body, html
	{
		overflow-x: hidden;
		overflow-y: hidden;
	}
	</style>
</head>
<body>
	<div id="container"></div>
</body>
<script id="vertexShader" type="x-shader/x-vertex">
	uniform float time;
	uniform float waveHeights[400];
	uniform float waveHeightLength;
	uniform float waveLength;
	uniform float waveAmplitude;
	uniform float zRotation;
	uniform float noiseScale;
	uniform vec3 maincolor;
	uniform vec3 subcolor;
	varying float vAlpha;
	varying vec3 color;
	varying vec4 mvPosition;

	void main() 
	{
		gl_PointSize = 2.0;
		float yval = position.y + 100.;
		float ratio = yval / 200.;
		float newypos = position.y;
		float x = ((time+position.x+(position.z/zRotation))/waveLength);
		float sineWave = ratio*(sin(x)*waveAmplitude);
		newypos = position.y + noiseScale*waveHeights[int(mod((time+position.x+position.z), waveHeightLength))] + sineWave;
		color = mix(maincolor, subcolor, 0.5*(newypos/300.0));
		vec3 newposition = vec3(position.x, newypos, position.z);
		mvPosition = modelViewMatrix * vec4( newposition, 1.0 );
		gl_Position = projectionMatrix * mvPosition;
	}
</script>
<script id="fragmentShader" type="x-shader/x-vertex">
	varying vec3 color;
	void main()
	{
		gl_FragColor = vec4( color, 1.0 );
	}
</script>
<script src="js/three.min.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/main.js"></script>
</html>